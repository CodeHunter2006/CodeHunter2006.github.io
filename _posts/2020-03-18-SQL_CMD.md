---
layout: post
title: "常用SQL"
date: 2020-03-18 22:00:00 +0800
tags: Mysql
---

# 基本原理

## 笛卡尔积

database 中的表要联合查询，就需要进行笛卡尔积，然后再做筛选处理。
笛卡尔积就是排列组合一下，新表是由两个原表的列相加、行相乘构造出来的。

## 显示方式

通常 sql 语句末尾`;`表示正常显示，`\G`表示每条纵向显示

# DML

- 语句以`;`结尾
- 单词之间通常以`空格`间隔，有时用 Tab 会导致无法识别

## 注释

`-- 单行注释, 注意"--"后边有一个空格`

```SQL
/*
  多行注释
*/
```

## INSERT INTO

插入数据

```SQL
INSERT INTO T1 values(1,2);
```

## UNION

将两个查询的内容合并，要求字段类型兼容，顺序一致

```SQL
SELECT column_name(s) FROM table_name1
UNION
SELECT column_name(s) FROM table_name2
```

## UNION ALL

同 UNION，要求字段名完全一致

# DDL

## 索引

- 查询索引

```SQL
show index from 'db1.t1';
```

- 创建索引

```SQL
-- 单值索引
create index a_idx on t1(name1);
-- 唯一索引
create unique index b_idx on t1(name1);
-- 复合索引
create index a_idx on t1(name1, name2, name3);
```

- 增加索引

```SQL
-- 单值索引
alter table t1 add index a_idx(name1);
-- 唯一索引
alter table t1 unique index b_idx(name1);
-- 复合索引
alter table t1 a_idx(name1, name2, name3);
```

- 删除索引

```SQL
drop index a_idx on t1;
```
