---
layout: post
title: "Redis集群方案"
date: 2021-04-09 10:00:00 +0800
tags: Redis Distribute
---

基本的 Redis 分布式结构可参考[Redis 分布式](/2019/01/28/Redis_distribute/)
这里继续探讨 Redis 集群方案中涉及的一致性问题

# 基本概念

"Redis 集群"的说法并不准确，只要是多台主配合实现功能就可以称为"集群"

- Redis 实际上有两种分布式结构：
  - **主从复制集群**
  - **cluster 模式集群**

## 主从复制集群

- 主从复制集群实现了 HA(高可用)，解决了单点故障
- 主从间数据保持同步，数据是全量的
- 主从复制取 AP，强调速度快，但是同步不精准，一致性不足

- 哨兵只是提供 HA 切换的功能(人工也是一样的)，不影响整体架构

## cluster 模式集群

- cluster 模式实现了"分治、分片"，解决了容量、压力的瓶颈问题
- 每个结点存储一部分数据
- Cluster 模式取 CP

## 综合集群

往往主从复制模式和 Cluster 模式是综合应用的。
可以给 Cluster 模式的每一个主加上从已保证 HA(High Availability)
