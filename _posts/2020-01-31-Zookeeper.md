---
layout: post
title: "Zookeeper基本使用"
date: 2020-01-31 21:00:00 +0800
tags: Server Zookeeper
---

![remote work](/assets/images/2020-01-31-Zookeeper_1.png)
Zookeeper 是一个开源的分布式文件系统，是 Hadoop 的组件，最早起源于雅虎研究院。可以用于网络锁、配置中心、网络队列。
因为雅虎内部网络项目特别多，需要一个协调的组件，所以就起名 Zookeeper——动物管理员。

# 基本功能

- 可以创建节点，节点可以保存数据，对节点增删改查
- 节点下可以创建子节点，类似文件夹下放子文件夹
- 一般的节点是持久节点，用`-e`可以创建临时节点，当客户端保持会话连接时节点存在，客户端断开连接后节点自动删除
- 可以对节点进行监听，有任何变化都会通知到客户端
- 可以用`-s`创建临时或持久的顺序节点，所谓顺序节点就是自动在节点名称后加一个十位序号，序号自动自增
  - 序号是 32 位整型，超过正数最大值转负，再超过负数最大值转正

# 客户端命令

`zkCli.sh`
在 zk 所在主机直接运行即可以客户端模式访问服务

`ls /path`
查看 path 下的节点列表

`get /path`
查看某个节点自身存储的数据

`create /path str`
创建节点并关联字符串到该节点

- `-e`创建临时节点

`set /path str`
修改节点关联的字符串

`delete /path`
删除节点，如果节点有子节点，则无法删除

`rmr /path`
递归删除所有节点
