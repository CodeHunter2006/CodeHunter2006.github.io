---
layout: post
title:  "一些Docker基本概念和常用命令"
date:   2019-01-02 09:00:00 +0800
tags: Docker
---

在Docker中可操作的元素有三种：Image(镜像)、Container(容器)、Volume(卷)

镜像和容器的差别就是是否运行，镜像是一种静态的，容器是一种正在运行中或是准备好运行参数的对象。卷是为了互联文件创建的对象。

Docker和虚拟机原理不同，并不是完整的把进程执行在期内部，而是用一层写入层将进程的修改内容记录下来，所以容器删除后对应的写入数据也会丢失。为了保存写入的数据，就要用到卷。

※运行容器时，可以通过宿主系统的ps或top命令查看，在容器中执行的进程也可以在宿主中看到，也可以说明Docker并不是虚拟机。

创建一个容器时，会自动生成一个 __容器ID__ ，之后可以利用这个ID进行操作，不用全部输入，只要输入一部分ID可区分即可。

如果没有指定容器名称，会自动生成一个 __容器名称__ ，一般是"形容词+名字"的形式，便于记忆。需要ID的位置输入名字也可以。

想要手动操作修改镜像，可以在启动时使用命令
```
docker run -it xxx/xxx:xxx bash
```
这样进入Linux操作系统时就会进入shell，`-i`表示交互、`-t`表示终端，这样就有了交互终端。做完修改之后，如果想保存，可以利用`docker commit`命令保存为镜像。

在容器的终端内退出容器
```
Ctrl+D
```

在容器的终端内，将容器切换到后台运行
```
Ctrl+P+Q
```
之后可以通过`docker attach 容器标识`命令切换入容器终端内，注意往往进入后看起来没反应，只是没有输出。

一般可以通过Build DockerFile来编译出一个镜像，也可以通过容器创建。实际上，DockerFile中的命令就好像在容器中执行了一系列操作一样，只是更容易读懂、避免了中间安装过程的时间和输出的信息造成扰乱，结合Git的话，就可以像维护代码那样来维护容器。

可以充分利用Docker Hub，上面有各种官方Docker以及其他人制作的Docekr。利用Git Hub可以维护DockerFile，结合使用，随时可以组合出自己的容器集群配置方案。

运行一个镜像为容器
```
docker run ...
```

查看当前运行的容器
```
docker ps
```

查看当前所有镜像
```
docker images
```

查看所有容器，包括未运行的
```
docker ps -a
```
